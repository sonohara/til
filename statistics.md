## 統計

### 基本
分散
```
分散 = （（データ - 平均値）の2乗）の総和 / 個数
```
- データがどれだけバラけているか
- 各データの平均との差、の平均
- 2乗するのは差にはプラス／マイナスの両方があり単純に合計すると打ち消しあってしまうので
  - 絶対値でもいいじゃん、てなるけどちゃんと意図があるぽい
  - http://webbeginner.hatenablog.com/entry/2016/05/25/102357

標準偏差
```
標準偏差 = 分散の平方根（ルート）
```
- 分散の平方根を計算した値
- `SD` と表記することもある
- 分散だと2乗されているから元データと単位が変わってしまい使いづらいから元に戻す
  - 例えば cm2 → cm にする感じ

不偏分散
```
不偏分散 = （（データ - 平均値）の2乗）の総和 / （個数 - 1）
```
- 標本から母集団の分散（母分散）を推定した値
- なんに使う？
  - 標本から母集団の値を推定するため
  - 母集団の分散は分からないことがほとんど（母集団すべてのデータを取得できることは稀）なので標本から推定する
- なんで-1した値で割るの？
  - https://mathtrain.jp/huhenbunsan
  - 難しいから標本分散は母分散（母集団の分散）よりも小さくなることが知られているため、分母を-1する、くらいに覚えておけば良さそう
    - https://best-biostatistics.com/summary/fuhen-bunsan-n1.html

標準誤差
- 推定量の標準偏差（バラツキ、精度）
  - 標準誤差が小さい＝推定量の標準偏差が小さい＝推定量の精度が良い
  - 標準誤差が大きい＝推定量の標準偏差が大きい＝推定量の精度が悪い

### 分布

確率変数
- どのような値となるかがある確率法則（確率分布）によって決まる変数
- 例
  - サイコロを振って出る目
- https://ja.wikipedia.org/wiki/%E7%A2%BA%E7%8E%87%E5%A4%89%E6%95%B0

確率分布
- 確率変数がある値となる確率、またはある集合に属する確率を決める関数
- https://ja.wikipedia.org/wiki/%E7%A2%BA%E7%8E%87%E5%88%86%E5%B8%83

正規分布（ガウス分布）
- ガウス関数で示される確率分布
  - 関数式は難しいので省略
  - https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E5%88%86%E5%B8%83
- 正しい定義は↑だがざっくり以下の特徴がある
  - 平均値最頻値と中央値が一致
  - 平均値を中心にして左右対称
  - X軸が漸近線
  - 自然界の多くのものの分布が正規分布になる
    - なので多くの場合で「正規分布に従う前提」で話が進む

標準正規分布
- 正規分布のうち、平均=0、標準偏差=1 のもの
- 平均±1.96となる確率が95％
- 標準化
  - 標準正規分布に変換すること
- Z値
  - 標準化後のデータ
```
標準化データ（Z値） = （データ値 - 平均）/ 標準偏差
```
- ↑理屈は難しそうなので覚える 
- なにが良い？
  - あるZ値以上／以下が生じる可能性が何%かが分かる
  - 標準正規分布表
    - Z値ごとに発生確率がまとまった表
    - 例
      - Z値 = 1.96 なら 0.25% = 平均±1.96内に全体の95%が含まれる
- https://best-biostatistics.com/summary/standard-norm.html

区間推定
> 母集団の従う分布が正規分布であると仮定できるときに、標本から得られた値を使ってある区間でもって母平均などの母数を推定する方法
- https://bellcurve.jp/statistics/course/8891.html

信頼区間 
- 区間推定で推定された区間
- `CI` と表記される（Confidence Interval）
- 精度（信頼水準、または、信頼係数）を付与して「90%信頼区間」「95%信頼区間」などと言われることが多い
- 意味の勘違いに注意
  
> 「信頼水準90%で、海王星の質量は a から b の間である」
とは言えるが、観測から得られた値 a と b に基づいて
「海王星の質量が a から b の間に入る確率は90%である」
と言うことはできない。質量はあくまで定数であって、誤差が生じるのは観測による、つまり a と b が誤差を含む統計量だからである。従来の統計学（確率を頻度として定義する頻度主義）の考え方では海王星の例（1）を言い直せば、
「同じ測定を10回行えば、確率的に9回程度の頻度で『海王星の質量は a から b の間である』という測定結果が得られる」
ということになる。

> 95％信頼区間とは、実験をたくさん、例えば100回繰り返したとき、それぞれの実験で得られたデータから計算された興味あるパラメーターが、その信頼区間に収まっている実験の頻度が、95回である

- https://ja.wikipedia.org/wiki/%E4%BF%A1%E9%A0%BC%E5%8C%BA%E9%96%93
- https://bellcurve.jp/statistics/course/8891.html
- https://qiita.com/katsu1110/items/4e8529f01a1389c03712


### 統計的仮説検定
とは？
- 統計的手法を用いて仮説を検証する方法
  - より正確には「母集団について仮定された仮設を標本に基づいて検証する」こと

特徴
- 背理法と確率を用いて評価する
  - 仮説Aと対立する仮説Bが発生する確率はXX%
  - XX%は基準YY%より低い
  - よって仮説Aは正しいはず
- 統計的に証明されたから絶対正しいわけではない
  - あくまで標本から算出した確率的にそういう可能性が高い、ということ

なぜ背理法を用いるのか？
- 仮説を支持するデータはいくら集めてもきりがない
  - Aで成り立ってもBで成り立つ保証はない
  - AとBで成り立ってもCで成り立つ保証はない
  - …
- 一方で、支持しないデータは1つでもあればその仮説は否定される
- →証明したい仮説と対立する仮説を棄却することで、目的の仮説を間接的に証明する

#### 仮説

種類
- 対立仮説
  - 証明したい仮設
  - 例
    - 渡されたコインコインである
- 帰無仮説
  - 対立仮説と対立する仮説
  - 例
    - 渡れたコインは普通のコインである

つまり
- 帰無仮説を棄却することで対立仮説を証明する
  - 棄却する＝無に帰すための仮説→帰無仮説


#### 検定
とは
- 統計標本量から帰無仮説が成り立つかどうか検証すること

検定統計量
- 検証するための標本の値

P値（Probability Value）
- 帰無仮説が正しいと仮定したとき、観測した事象またはそれよりも更に外れた事象が起こる確率
- P値が高い
  - ＝観測事象は起こりやすい
  - ＝前提とした帰無仮説は正しい
  - ＝対立仮説（目的の仮説）は正しくない
- p値が低い
  - ＝観測事象は起こりにくい
  - ＝前提とした帰無仮説は正しくない
  - ＝対立仮説（目的の仮説）は正しい

有意水準
- 帰無仮説を棄却する水準・確率
- α（アルファ）で表される
- 検定を行う前に決めておく
- 一般的にはP値 5% or 10% とすることが多い

棄却域
- 帰無仮説が棄却される統計検定量の値の集合

片側検定／両側検定
- 片側検定
  - 多少や大小などを調べるための検定
  - 多少のどちらかを調べればよいので「片側」
- 両側検定
  - 有無やである／でないを調べるための検定
  - 多少の両方を否定する必要があるので「両側」

種類
- 対象データの特徴に応じて最適な手法を選択する必要がある
- パラメトリック検定
  - 母集団が正規分布している（と仮定した）場合の検定手法
  - 例
    - T検定
    - F検定
    - 回帰分析
    - 分散分析
- ノンパラメトリック検定
  - 母集団が正規分布していない（と仮定した）場合の検定方法
  - 例
    - 順位和検定
    - カイ二乗検定


### T検定
とは
- https://ja.wikipedia.org/wiki/T%E6%A4%9C%E5%AE%9A#%E7%A8%AE%E9%A1%9E
> 帰無仮説が正しいと仮定した場合に、統計量がt分布に従うことを利用する統計学的検定法の総称
- 別名「母平均に対する検定」
  - 平均に有意差があるかどうかの検定
  - 例
    - 平均値が○○と異なるかどうか
    - リンゴAの大きさの平均とリンゴBの大きさの平均が異なるか

前提条件
- 対象となるデータが正規分布している

種類
- 1標本T検定（一群のT検定）
- 2標本T検定（二群のT検定）
  - 対応のある2標本T検定
  - 対応のない2標本T検定
- 分散の検定

#### 1標本T検定
とは
- 母平均と標本平均が等しいかどうか検定する手法
- 例
  - ある工場では部品Aを製造している
  - 製造された部品Aの中からランダムに10個を選び長さを測定したところ、平均値は7.2cm、標準偏差は0.2cmだった
  - 部品Aの長さが正規分布に従うとき、この工場で製造している部品Aの長さは7.0cmといえるか

考え方
- 「差がない」ことを確認する
- 母平均と標本平均が等しい = 母平均と標本平均の差が0かどうか

やり方
- 

#### 2標本T検定
とは
- 2つの母集団から抽出した2つの標本の平均に差があるかどうかを検定すること
- さらに、母集団同士の関係性によって「対応のある2標本T検定」と「対応のない2標本T検定」に分かれる

考え方
- 「差がない」ことを確認する
- 2標本間で差がない = 2標本間の差の平均値が0かどうか

#### 対応のある2標本T検定
とは
- 2つの標本が同じ母集団から抽出され一対となっている場合の2標本T検定
- `paired t-test`
- 例
  - 同じ人を対象として走る前と走った後で、体温に違いが出るか
  - 同じ人を対象として試験前後の血圧に差があるか

#### 対応のない2標本T検定
とは
- 2つの標本が異なる母集団から抽出された場合の2標本T検定
- `unpaired t-test`
- 例
  - AクラスとBクラスのテストの点数に差があるか

#### 分散の検定
とは
- 別名「F検定」

#### 参考
- [統計学をツールとして利用する時に参考になるサイトまとめ](https://qiita.com/KentaroUeda/items/946d58cd7a93be7bd9d7)
- [検定とP値：統計的エビデンスとは](https://www.amed.go.jp/content/000034155.pdf)
- [検定の選び方：検定は結論を変え得る](https://www.amed.go.jp/content/000034160.pdf)
- [改訂増補版：統計検定を理解せずに使っている人のためにⅠ](https://katosei.jsbba.or.jp/view_html.php?aid=1183)
- [改訂増補版：統計検定を理解せずに使っている人のためにⅡ](https://katosei.jsbba.or.jp/view_html.php?aid=1196)
- [改訂増補版：統計検定を理解せずに使っている人のためにⅢ](https://katosei.jsbba.or.jp/view_html.php?aid=1208)
- http://www.aoni.waseda.jp/abek/document/t-test.html
- https://logics-of-blue.com/t-test/

